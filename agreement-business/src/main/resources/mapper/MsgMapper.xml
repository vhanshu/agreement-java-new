<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vhans.bus.chat.mapper.MsgMapper">

    <select id="selectMsgList" resultType="com.vhans.bus.chat.domain.Msg">
        select
        id,
        from_uid,
        to_uid,
        msg_type,
        content,
        is_read,
        create_time,
        update_time
        from c_msg
        <where>
            <if test="query.msgType != null">
                msg_type = #{query.msgType}
            </if>
            <if test="query.isRead != null">
                is_read = #{query.isRead}
            </if>
            <if test="query.content != null">
                and content like concat('%',#{query.content},'%')
            </if>
            <if test="query.startTime != null">
                and date_format(create_time,'%y%m%d %H:%i:%s') &gt;= date_format(#{query.startTime},'%y%m%d %H:%i:%s')
            </if>
            <if test="query.endTime != null">
                and date_format(create_time,'%y%m%d %H:%i:%s') &lt;= date_format(#{query.endTime},'%y%m%d %H:%i:%s')
            </if>
        </where>
    </select>

</mapper>