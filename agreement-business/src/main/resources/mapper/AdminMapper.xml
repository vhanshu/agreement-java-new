<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vhans.bus.system.mapper.AdminMapper">

    <select id="listAdmin" resultType="com.vhans.bus.system.domain.Admin">
        SELECT
        a.id,
        a.nickname,
        a.avatar,
        a.email,
        a.ip_address,
        a.ip_source,
        a.is_disable,
        a.login_time,
        a.create_time,
        r.id AS role_id,
        r.role_name
        FROM s_admin a
            LEFT JOIN s_admin_role ar ON a.id = ar.admin_id
            LEFT JOIN s_role r ON ar.role_id = r.id
        <where>
            <if test="query.adminName != null">
                username like concat('%',#{query.adminName},'%')
            </if>
            <if test="query.nickname != null">
                nickname like concat('%',#{query.nickname},'%')
            </if>
        </where>
    </select>
</mapper>
